<!DOCTYPE html>
<html lang = "ja">
  <head>
    <meta charset="UTF-8">
    <meta name = "viewport" content = "width = device-width, initial-scale = 1.0">
    <style>
      body {
        font-family: Arial, sans-serif;
      }
      textarea {
        width: 100%;
        height: 100vh;
      }
    </style>
  </head>
    <body>
      <!-- 編集画面 -->
      <header>
        <button onclick="goBack()">←</button>
        <h1>小説タイトル</h1>
      </header>
      <!-- タイトル入力 -->
      <input type = "text" id = "novelTitle" placeholder="タイトルを入力してください">
      <!-- 本文入力 -->
      <textarea id = "novelInput" placeholder = "ここに小説を入力してください..."></textarea>
      <button onclick = "saveNovel()">保存</button>
      <button onclick = "loadNovel()">読み込み</button>

      <script>
        function saveNovel(){
          const novelTitle = document.getElementById('novelTitle').value;
          const novelText = document.getElementById('novelInput').value;

          if (!novelTitle || !novelText){
            alert("タイトルと本文の両方を入力してください。");
            return;
          }

          // 小説のデータを作成
          const novel = {
            title: novelTitle,
            text:novelText
          };

          // 既存の小説一覧を取得(存在しない場合は空の配列を作る)
          const novels = JSON.parse(localStorage.getItem('novels')) || [];

          //新しい小説を追加
          novels.push(novel);

          //更新された小説一覧をローカルストレージに保存
          localStorage.setItem('novels',JSON.stringify(novels));
          alert('小説が保存されました！');

          //小説一覧ページに戻る
          window.location.href = 'novel_index.html';

          
   
        }

        function loadNovel(){
          const savedNovel = localStorage.getItem('novel');
          if(savedNovel){
            document.getElementById('novelInput').value = savedNovel;
            alert('保存された小説が読み込まれました！');
          } else {
            alert('保存された小説が見つかりません。');
          }
        }

        function goBack() {
          window.location.href = 'novel_index.html';
        }
        
      </script>
   </body>
</html>